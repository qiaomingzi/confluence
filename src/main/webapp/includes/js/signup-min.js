(function(b){var a=function(f){var e=f[0];if(e.setSelectionRange){var d=f.val().length;e.setSelectionRange(0,d)}else{if(e.createTextRange){var c=e.createTextRange();c.execCommand("SelectAll");c.select()}}};Confluence.SignUpForm=function(){var g,d,i=function(){return g.data("custom")},h=function(){var j=d.val(),k=j.match(/[^@]+/);return(k?k[0].replace(/[\\,+<>'"\s]/g,"").toLowerCase():"")},f=function(){if(i()){return}var j=h();g.val(j)},c=function(){a(g)},e=function(){var j=g.val();if(j&&j!==h()){g.data("custom",j)}else{g.removeData("custom")}};return{load:function(){g=b("#username");d=b("#email");e();return this},bindEvents:function(){d.bind("keyup paste blur",f);g.bind("blur",e);g.bind("focus",c);b('form[name="signupform"]').bind("reset",function(){g.removeData("custom")});return this}}};AJS.toInit(function(){Confluence.SignUpForm().load().bindEvents()})})(AJS.$);