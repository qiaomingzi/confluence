AJS.$(function(a){a(".tasklist a.view-completed-tasks").click(function(b){a(".tasks.completed").toggle();b.preventDefault()});a(".tasklist ul.tasks.completed").hide();a(".tasklist").on("click",".task-checkbox",function(g){g.preventDefault();var d=a(this).data("task-key"),b=a(this).hasClass("dismissed"),c=AJS.contextPath()+(b?"/admin/unignoretask.action":"/admin/ignoretask.action"),f=!b;if(!d){return}a(this).toggleClass("dismissed");a.ajax({url:c,data:{key:d,atl_token:AJS.Meta.get("atl-token")}}).done(function(e){if(e.ignored^f){a(this).toggleClass("dismissed");AJS.messages.error({title:AJS.I18n.getText("admintask.error.title"),body:f?AJS.I18n.getText("admintask.error.not.dismissed"):AJS.I18n.getText("admintask.error.not.reinstated")})}}).fail(function(h,e,i){a(this).toggleClass("dismissed");AJS.messages.error({title:AJS.I18n.getText("admintask.error.title"),body:AJS.I18n.getText("admintask.error.unknown")})})})});