(function(d){var a=function(e){var f,g;f=function(){return e.baseElement};g=function(i){var h=d("ul",i);if(!h.length){h=AJS("ul").appendTo(i)}return h};return{getMessageContainer:f,clearMessages:function(){f().addClass("hidden").empty()},displayMessages:function(l){if(!l||!l.length){return}if(!d.isArray(l)){l=[l]}var m=f(),k=g(m);for(var h=0,j=l.length;h<j;h++){AJS("li").text(l[h]).appendTo(k)}m.removeClass("hidden")},handleResponseErrors:function(h,i){var j=[].concat(h.validationErrors||[]).concat(h.actionErrors||[]).concat(h.errorMessage||[]);if(j.length){this.displayMessages(i||j);return true}return false}}};AJS.MessageHandler=function(f,g){var e=d.extend(a(f),g&&g(f));e.getMessageContainer().addClass("message-handler");e.clearMessages();return e};var c=false;var b;AJS.MessageHandler.closeOnNew=function(e){if(typeof e!=="undefined"){c=e}else{return c}};AJS.MessageHandler.message=function(f,e,g){g=g||"success";if(c){f.empty()}AJS.messages[g](f,{body:e,closeable:true,shadowed:true})};AJS.MessageHandler.error=function(f,e){AJS.MessageHandler.message(f,e,"error")};AJS.MessageHandler.actionMessage=function(e,f){b=b||d("#action-messages");AJS.MessageHandler.message(b,e,f)};AJS.MessageHandler.loading=function(e){AJS.MessageHandler.actionMessage(e,"info")}})(AJS.$);