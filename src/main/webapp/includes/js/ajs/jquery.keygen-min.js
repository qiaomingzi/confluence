(function(c,b){c.KeyGenerator=function(){var i=["THE","A","AN","AS","AND","OF","OR"],f={},h=function(k){return k.join("").length},j=function(k){return b.grep(k,function(m,l){return b.inArray(m,i)===-1})},g=function(l){var k="";b.each(l,function(m,n){k+=n.charAt(0)});return k},e=function(m){var l=false;var k;for(k=0;k<m.length;k++){if(d(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m},d=function(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};f[199]="C";f[231]="c";f[252]="u";f[251]="u";f[250]="u";f[249]="u";f[233]="e";f[234]="e";f[235]="e";f[232]="e";f[226]="a";f[228]="a";f[224]="a";f[229]="a";f[225]="a";f[239]="i";f[238]="i";f[236]="i";f[237]="i";f[196]="A";f[197]="A";f[201]="E";f[230]="ae";f[198]="Ae";f[244]="o";f[246]="o";f[242]="o";f[243]="o";f[220]="U";f[255]="Y";f[214]="O";f[241]="n";f[209]="N";return{generateKey:function(n,y){y=b.extend({},y);var m=(typeof y.desiredKeyLength=="number")?y.desiredKeyLength:4,u=(typeof y.maxKeyLength=="number")?y.maxKeyLength:Infinity,s=(typeof y.charBlacklistRegex!="undefined"?y.charBlacklistRegex:/[^a-zA-Z0-9]/g);n=b.trim(n);if(!n){return""}var r=[];for(var q=0,x=n.length;q<x;q++){var k=f[n.charCodeAt(q)];r.push(k?k:n[q])}n=r.join("");var t=[];b.each(n.split(/\s+/),function(z,A){if(A){A=A.replace(s,"");A=A.toUpperCase();A.length&&t.push(A)}});if(m&&h(t)>m){t=j(t)}var v;if(t.length==0){v=""}else{if(t.length==1){var l=t[0],o=e(l);if(u<l.length||Math.abs(l.length-m)>=Math.abs(o.length-m)){v=o}else{v=l}}else{var w=h(t),p=g(t);if(u<w||Math.abs(w-m)>=Math.abs(p.length-m)){v=p}else{v=t.join("")}}}if(u&&v.length>u){v=v.substr(0,u)}return v}}};var a=c.KeyGenerator();b.fn.generateFrom=function(g,e){var d={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,charBlacklistRegex:/[^a-zA-Z0-9]/g,uppercase:true,validationCallback:function(){},errorCallback:function(){}},f=b(this).first(),g=g.first(),e=b.extend({},d,e);(function(){var j=function(){return f.data("autosuggest")!==false},o=function(p){if(p){if(f.data("lastGeneratedValue")!==p){f.data("autosuggest",false)}}else{f.data("autosuggest",true)}},n=function(p){var q=f.val();f.data("lastGeneratedValue",p);f.val(p);return q!=p},h=function(){o(f.val());k()},i=function(p){m(p,h)},m=function(s,q){var p=b(s.target),r;r=function(){l(s);q();if(p.is(":visible")){p.data("checkHook",setTimeout(r,e.timeoutMS))}};if(!p.data("checkHook")){p.data("checkHook",setTimeout(r,0))}},l=function(q){h();var p=b(q.target);clearTimeout(p.data("checkHook"));p.removeData("checkHook")},k=function(){if(j()){var p=a.generateKey(g.val(),{desiredKeyLength:e.desiredKeyLength,maxKeyLength:e.maxKeyLength,charBlacklistRegex:e.charBlacklistRegex});if(n(p)){e.validationCallback()}}};g.attr("maxlength",e.maxNameLength);f.attr("maxlength",e.maxKeyLength);if(e.uppercase){f.css("text-transform","uppercase")}if(document.activeElement&&document.activeElement===g[0]){i({target:g[0]})}g.focus(i);g.blur(l)})();return this}})(window,jQuery);