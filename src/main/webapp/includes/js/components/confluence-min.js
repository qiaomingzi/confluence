(function(a){Confluence={getContextPath:function(){return AJS.Meta.get("context-path")},getBaseUrl:function(){return AJS.$("#confluence-base-url").attr("content")||""},getBuildNumber:function(){return AJS.Meta.get("build-number")},getContentId:function(){var b=AJS.Meta.get("content-id");if(!+b){b=AJS.Meta.get("page-id")}if(!+b){b="0"}return b},getXsrfToken:function(){return AJS.Meta.get("atl-token")},runBinderComponents:function(){AJS.log("AJS.Confluence: run binder components");for(var b in Confluence.Binder){if(Confluence.Binder.hasOwnProperty(b)){try{Confluence.Binder[b]()}catch(c){AJS.log("Exception in initialising of component '"+b+"': "+c.message)}}}},placeFocus:function(){Confluence.Binder.placeFocus()},unescapeEntities:function(c){var b={amp:"&",lt:"<",gt:">","#39":"'",quot:'"'};if(c==null){return c}return(""+c).replace(/&[#\d\w]+;/g,function(e){var d=e.substring(1,e.length-1);return b[d]||e})},sessionCheck:function(f,d){var e=AJS.Meta.get("remote-user");if(!e){return}var b=this.getContextPath()+AJS.REST.getBaseUrl()+"session/check/"+e;var c=this;return a.getJSON(b).done(function(){AJS.log("SESSION CHECK - OK - "+e)}).fail(function(){AJS.log("SESSION CHECK - FAIL - "+e);c.sessionFail(f,d)})},sessionFail:function(f,e){if(!f){var d=a(".aui-dialog:visible");if(d.length){f=d.find(".dialog-panel-body").empty();d.find(".aui-button").attr("disabled","disabled")}else{throw new Error("sessionFail method really expected a visible dialog about now :/")}}if(!e){var c='<a class="reload" href="">';var b="</a>";e=AJS.I18n.getText("user.session.timed.out",c,b);f.on("click","a.reload",function(){window.location.reload()})}AJS.messages.warning(f,{body:e,closeable:false,shadowed:true})}};Confluence.Binder={placeFocus:function(){var c,b=-1;AJS.$("input[data-focus]").each(function(){var e=AJS.$(this),d=e.attr("data-focus");if(d>b){b=d;c=e}});c&&c.focus()}}})(AJS.$);AJS.toInit(function(){Confluence.runBinderComponents()});AJS.Confluence=Confluence;Confluence.hintManager=function(b){if(!AJS.$.isArray(b)){throw new Error("Hints passed in must be an array of strings")}var a=Math.floor(Math.random()*b.length);return{getNextHint:function(){var c=b[a];a=(a+1)%b.length;return c}}};