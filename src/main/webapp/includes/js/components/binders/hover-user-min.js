Confluence.Binder.userHover=(function(){var f=[],b=Confluence.getContextPath(),d=AJS.$;var a=function(i){var h=f[i],g={username:h,target:this};d(self).trigger("hover-user.open",g);d(".ajs-menu-bar",this).ajsMenu();d(".follow, .unfollow",this).each(function(){var j=d(this).click(function(l){if(j.hasClass("waiting")){return}var k=j.hasClass("unfollow")?"/unfollowuser.action":"/followuser.action";j.addClass("waiting");console.log("This is the new file");AJS.safe.post(b+k+"?username="+encodeURIComponent(h)+"&mode=blank",{},function(){j.removeClass("waiting");j.parent().toggleClass("follow-item").toggleClass("unfollow-item");d(self).trigger("hover-user.follow",g)});return AJS.stopEvent(l)})})};var c=["span.user-hover-trigger","a.confluence-userlink","img.confluence-userlink","a.userLogoLink"].join(", ");var e=AJS.DarkFeatures.isEnabled("show.business.group.in.user.hover");return function(){d(c).filter("[data-user-hover-bound!='true']").each(function(){var h=d(this),i=h.attr("data-username");h.attr("title","").attr("data-user-hover-bound","true");d("img",h).attr("title","");var g=d.inArray(i,f);if(g==-1){f.push(i);g=d.inArray(i,f)}d(this).addClass("userlink-"+g)});d.each(f,function(h){var g=b+"/users/userinfopopup.action?username="+encodeURIComponent(f[h]);if(e){g+="&profileGroups=business"}AJS.contentHover(d(".userlink-"+h),h,g,a)})}})();