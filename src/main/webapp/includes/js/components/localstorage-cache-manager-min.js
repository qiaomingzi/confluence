(function(a){AJS.Confluence.localStorageCacheManager=function(i,d){this.cache={};this.cacheStack=[];this.cacheSize=d||30;if(!window.localStorage||(typeof i!=="string"&&i.length>0)){return}var f="Confluence."+i,c=f+".cache",h=f+".cacheStack";var b=localStorage.getItem(c);var j=localStorage.getItem(h);var k=this;if(b&&j){try{this.cache=JSON.parse(b);this.cacheStack=JSON.parse(j)}catch(g){this.cache={};this.cacheStack={}}}a(window).unload(function(){localStorage[c]=JSON.stringify(k.cache);localStorage[h]=JSON.stringify(k.cacheStack)})};AJS.Confluence.localStorageCacheManager.prototype=new AJS.Confluence.cacheManager()})(AJS.$);