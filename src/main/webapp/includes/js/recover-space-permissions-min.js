AJS.toInit(function(c){var d=AJS.$("#space-permissions-table .recover-permissions-link"),b=AJS.Meta.get("remote-user");d.on("click",function(h){var e=AJS.$(this),g=e.data("space-key"),f=new AJS.Dialog({width:400,height:210,id:"recover-permissions-dialog",closeOnOutsideClick:true});a(f,b,g);f.show();h.preventDefault()});var a=function(f,e,g){f.addHeader(AJS.I18n.getText("admin.defaultspacepermissions.spaces.recoverpermissions.dialog.title"));f.addPanel("message","<p>"+AJS.I18n.getText("admin.defaultspacepermissions.spaces.recoverpermissions.dialog.content")+"</p>","recover-permissions-panel-body");f.addButton(AJS.I18n.getText("ok"),function(h){AJS.safe.ajax({type:"POST",url:AJS.Meta.get("context-path")+"/admin/permissions/grantspacepermissions.action",data:{spaceKey:g}}).done(function(){location.reload()}).fail(function(){AJS.log("Space Permissions: Failed to recover space permissions for "+e+" to the "+g+" space.")}).always(function(){h.remove()})});f.addLink(AJS.I18n.getText("cancel.name"),function(h){h.remove()},"#")}});