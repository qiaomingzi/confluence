Confluence.QuickNav=(function(c){var b=[];var a;return{addDropDownPostProcess:function(d){if(typeof d!=="undefined"){b.push(d)}else{AJS.log("WARN: Attempted to add a dropdown post-process function that was undefined.")}},setMakeParams:function(d){a=d},init:function(e,d){e.quicksearch("/rest/quicknav/1/search",null,{dropdownPlacement:d,dropdownPostprocess:function(f){c.each(b,function(h,g){g&&g(f)})},makeParams:function(f){if(a){return a(f)}else{return{query:f}}},ajsDropDownOptions:{className:"quick-search-dropdown"}})}}})(AJS.$);AJS.toInit(function(){var h=function(){AJS.$("#quick-search").on("keydown",function(m){var k=AJS.dropDown.current&&AJS.dropDown.current.getFocusIndex()!=-1;var n=m.which===13&&(m.metaKey||m.ctrlKey);if(n&&!k){var l=AJS.$(this);l.attr("target","_blank");l.submit();l.attr("target","")}})};var e=function(){AJS.$("#quick-search").on("click","div.quick-search-dropdown li",function(q){var l=AJS.$(this);var p=AJS.$(q.target);var n=!(p.is("a")&&(p.parent().children("a")).index(p)===1)||(q.originalEvent!==undefined);if(n){var m=l.children("a:first").attr("class");var k=l.index("div.quick-search-dropdown li");var o={name:"quicknav-click-"+m,data:{index:k}};AJS.trigger("analytics",o)}});AJS.$("#quick-search").on("submit",function(){var l=AJS.$("div.quick-search-dropdown li").length;var k={name:"quicknav-hit-enter",data:{results:l}};AJS.trigger("analytics",k)})};var f=function(){var k=AJS.$("#quick-search-query");AJS.$("#quick-search").on({"quick-search-loading-start":function(){k.addClass("loading")},"quick-search-loading-stop":function(){k.removeClass("loading")}})};var g=function(k){return function(l){k.closest("form").find(".quick-nav-drop-down").append(l)}};var b=function(k){AJS.$("a",k).each(function(){var n=$(this);var l=n.find("span");var m=AJS.dropDown.getAdditionalPropertyValue(l,"spaceName");if(m&&!n.is(".content-type-spacedesc")){n.after(n.clone().attr("class","space-name").html(m));n.parent().addClass("with-space-name")}})};var j=AJS.$("#quick-search-query"),c=AJS.$("#space-blog-quick-search-query"),d=AJS.$("#confluence-space-key");var a=g(j);var i=AJS.defaultIfUndefined("Atlassian.SearchableApps.QuickNav",{defaultValue:Confluence.QuickNav});i.init(j,a);i.addDropDownPostProcess(b);if(c.length&&d.length){c.quicksearch("/rest/quicknav/1/search?type=blogpost&spaceKey="+AJS("i").html(d.attr("content")).text(),null,{dropdownPlacement:g(c)})}e();f();h()});