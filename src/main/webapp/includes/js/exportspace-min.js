AJS.toInit(function(f){var g="data-content-tree-loaded";function c(){var i=!!f("#contentOptionAll:checked").length;if(i){d()}else{b()}}function d(){f("#exportContentTree").hide();f("#export-comments-attachments-options-container").hide();f("#export-content-tree-container").hide()}function b(){var i=f("#exportContentTree");if(!(i.attr(g)==="true")){e(function(){f(".exportContentTreeCheckbox").click(function(){h(this)});f(".togglemeonlytreenode").click(function(k){var j=f(f(this).siblings(".exportContentTreeCheckbox").get(0));if(j.prop("checked")){j.prop("checked",false)}else{j.prop("checked",true)}event.preventDefault()})})}f("#export-comments-attachments-options-container").show();f("#export-content-tree-container").show();i.show()}function h(j){var i=f(j),k=i.prop("checked");i.parent().find("input.exportContentTreeCheckbox").prop("checked",k).each(a(k))}function a(i){return function(j,m){var l=f(m).val(),k=f('input[name="contentToBeExcluded"]',f(m).parent());if(!i){AJS.log("Setting contentToBeExcluded to "+l);k.val(l)}else{AJS.log("Unsetting contentToBeExcluded");k.val("")}}}function e(l){var i=f("#exportContentTree"),k=Raphael.spinner("exportContentTree",15,"#111"),j=AJS.params.contextPath+i.attr("data-content-tree-src"),m={key:i.attr("data-space-key")};f.ajax({type:"GET",url:j,data:m,success:function(n){k();i.attr(g,"true").html(n);l&&l()},error:function(o,q,p){k();var n=AJS.template.load("content-tree-error-template").fill({errorText:p+" "+q+": url="+j+" params="+f.param(m)});i.attr(g,"true").html(n);f('div.buttons-container input.submit[name="confirm"]').attr("disabled","disabled")},dataType:"html"})}f("a.checkAllLink").click(function(){f("input.exportContentTreeCheckbox").prop("checked",true).each(a(true));return false});f("a.clearAllLink").click(function(){f("input.exportContentTreeCheckbox").prop("checked",false).each(a(false));return false});f("#includeComments").click(function(){f("#includeCommentsCopy").prop("checked",this.checked)});f("#includeCommentsCopy").click(function(){f("#includeComments").prop("checked",this.checked)});f("#backupAttachments").click(function(){f("#backupAttachmentsCopy").prop("checked",this.checked)});f("#backupAttachmentsCopy").click(function(){f("#backupAttachments").prop("checked",this.checked)});f("#contentOptionAll, #contentOptionVisible").click(c);f(".export-space-choose-format form").submit(function(l){l.preventDefault();var j=f(this),k=f("input[name=format]:checked",j),i=k.attr("data-href");if(i){window.location.href=i}})});